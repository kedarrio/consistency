# Development Plan — v1.0.0

> Phase-by-phase execution plan for Consistency PWA.

---

## Overview

| Phase | Duration | Goal |
|-------|----------|------|
| Phase 1 | Week 1 | Foundation — setup, design system, components |
| Phase 2 | Weeks 2-4 | Core features — all 8 trackers, data persistence |
| Phase 3 | Weeks 5-6 | Polish — animations, notifications, PWA |

---

## Phase 1: Foundation (Week 1)

**Goal:** Working skeleton with design system and all components built.

### Task 1.1 — Project Setup
- [ ] Initialize Vite + React project: `npx create-vite@latest . --template react`
- [ ] Install dependencies: React Router, Tailwind CSS, MUI Icons, Recharts, date-fns
- [ ] Configure Tailwind with custom tokens from `design/tokens.json`
- [ ] Set up Git repository
- [ ] Configure ESLint + Prettier
- [ ] Set up folder structure (`pages/`, `components/`, `context/`, `utils/`, `hooks/`)

### Task 1.2 — Design System
- [ ] Import fonts (Playfair Display + IBM Plex Mono via Google Fonts)
- [ ] Create CSS custom properties from `tokens.json`
- [ ] Build base layout components (Page wrapper, content container)
- [ ] Test all colors and typography

### Task 1.3 — Component Library
Build and test each component in isolation:
- [ ] `Button` (primary, secondary, icon, FAB, danger)
- [ ] `HabitCard` (all 4 quick-action variants)
- [ ] `ProgressBar` (mini + large)
- [ ] `CircularProgress` (SVG-based timer ring)
- [ ] `Toggle` (iOS-style) — see `references/Toggle.png`
- [ ] `SegmentedPicker` — see `references/SegmentedPicker.png`
- [ ] `TextInput`, `TextArea`, `NumberInput`
- [ ] `DatePicker`, `TimePicker` (Apple-style scrolling wheel)
- [ ] `Slider`
- [ ] `Modal` (base modal + bottom sheet)
- [ ] `BarChart` (7-day, monthly)
- [ ] `LineChart`
- [ ] `HeatMapCell` + Calendar grid
- [ ] `TopNav`, `BottomNav`, `HamburgerDrawer`

### Task 1.4 — Routing
- [ ] Set up React Router v6
- [ ] Define all routes: `/`, `/stats`, `/calendar`, `/settings`, `/profile`, `/habit/:id`, `/logs/:id`, `/day/:date`, `/onboarding`
- [ ] Implement page transition animations

**Deliverable:** Design system implemented, all components in Storybook or test page

---

## Phase 2: Core Features (Weeks 2-4)

**Goal:** Fully functional app with all trackers and persistence.

### Task 2.1 — Data Layer
- [ ] Define all data schemas (see `specs/data-model.md`)
- [ ] Build localStorage utility: `get`, `set`, `update`, `remove` with JSON serialization
- [ ] Build React Context + hooks for global state:
  - `useUser()`, `useSettings()`, `useHabits()`
- [ ] Initialize default data on first launch

### Task 2.2 — Onboarding (8 Screens)
See `specs/features/onboarding.md` for full specs.
- [ ] Screen 1: Splash (logo + tagline)
- [ ] Screen 2: App explanation + consent (checkbox to proceed)
- [ ] Screen 3: Personal details (name, age, gender)
- [ ] Screen 4: Habit selection (8 cards, all pre-checked)
- [ ] Screen 5: Body transformation setup (conditional — Workout only)
- [ ] Screen 6: Preferences (week start, time format, day boundary)
- [ ] Screen 7: Promise (10-word commitment)
- [ ] Screen 8: Explain tracker types (4 cards)
- [ ] Flash sequence: Save → Promise flash screen (3s) → Dashboard
- [ ] Save all onboarding data to localStorage

### Task 2.3 — Dashboard
- [ ] Render habit cards from user's active habits
- [ ] Welcome message: "Welcome back, [Name]"
- [ ] Optional consistency score card (toggle in settings)
- [ ] Reorderable cards (long-press + drag-and-drop)
- [ ] Quick action buttons per card type
- [ ] Navigate to Habit Detail on card tap

### Task 2.4 — Habit Detail Page Template
- [ ] Top nav with back arrow + habit name + hamburger
- [ ] Primary action section (varies by type)
- [ ] Mini calendar section (week/month toggle)
- [ ] Statistics section (metrics grid + bar chart)
- [ ] "View Logs" button
- [ ] FAB (except No-Fap)
- [ ] Manual Entry Modal

### Task 2.5 — Session-Based Trackers
Reference tracker: Meditation. Apply same pattern to Work, Workout, Reading, Sleep.
- [ ] Start session: record start time in localStorage, begin timer
- [ ] Timer: display elapsed time, persist through page refresh
- [ ] Stop session: open stop modal with pre-filled data
- [ ] Stale session detection (>12 hours)
- [ ] Manual entry via FAB
- [ ] Habit-specific fields (Workout: type + intensity, Sleep: quality, etc.)

### Task 2.6 — Remaining Trackers
- [ ] Hydration (incremental): +/- buttons, daily count, daily reset
- [ ] No-Fap (streak): auto-increment, reset flow with reflection modal
- [ ] Journal (manual): text entry, photo upload

### Task 2.7 — Logs Page
- [ ] Entry list with time filter (segmented picker)
- [ ] Entry cards (date, value, notes preview)
- [ ] Edit entry on tap
- [ ] Long-press → select mode → multi-delete
- [ ] Empty state

### Task 2.8 — Stats Page
- [ ] Time range filter (segmented: Daily/Weekly/Monthly/Yearly/All-Time)
- [ ] Overall consistency score (large, with circular progress)
- [ ] Per-habit breakdown cards
- [ ] Areas to Improve section
- [ ] Implement all consistency calculations (see `specs/calculations.md`)

### Task 2.9 — Calendar Page
- [ ] Monthly heat map grid
- [ ] Month navigation (← →)
- [ ] Day tap → show day highlights card below
- [ ] "View More" → Day Detail page with timeline

### Task 2.10 — Profile Page
- [ ] Profile photo (upload + display)
- [ ] Name, age, gender display
- [ ] Promise display + edit
- [ ] Quick stats
- [ ] Privacy & Legal links

### Task 2.11 — Settings Page
- [ ] Preferences section (all options)
- [ ] Active Habits section (toggle per habit)
- [ ] Notifications section (global toggle + configure link)
- [ ] Data Management (export CSV/JSON, import, clear all)
- [ ] Display section
- [ ] About section

### Task 2.12 — Body Transformation Feature (Workout)
- [ ] Photo upload (camera or gallery)
- [ ] Weight input per photo
- [ ] Photo timeline/gallery view
- [ ] Before/after comparison

**Deliverable:** Fully functional app, all trackers work, data persists

---

## Phase 3: Polish & PWA (Weeks 5-6)

**Goal:** Production-ready, smooth, installable PWA.

### Task 3.1 — Micro-Animations
- [ ] Button press (scale + ripple)
- [ ] Progress bar fills (500ms ease-out)
- [ ] Page transitions (slide)
- [ ] Modal open/close (fade + scale)
- [ ] Celebration confetti (on goal completion)
- [ ] Drawer slide (hamburger menu)

### Task 3.2 — Web Notifications
- [ ] Request permission flow
- [ ] Schedule per-habit notifications (Web Notifications API)
- [ ] Per-habit notification settings in Settings
- [ ] Sounds (on/off toggle)

### Task 3.3 — PWA Setup
- [ ] `manifest.json` (name, icons, theme colors, display: standalone)
- [ ] Service worker via Vite PWA plugin (Workbox)
- [ ] Offline caching (static assets cache-first)
- [ ] Install prompt handling
- [ ] Test installability on Android Chrome

### Task 3.4 — Testing & QA
- [ ] Walk through all user flows (onboarding, each tracker, stats, calendar, settings)
- [ ] Test all edge cases (see `reference/edge-cases.md`)
- [ ] Accessibility audit (Lighthouse ≥ 90)
- [ ] Performance audit (Lighthouse ≥ 90, TTI < 3s)
- [ ] Test on multiple devices/screen sizes
- [ ] Browser compatibility (Chrome, Safari, Firefox)

### Task 3.5 — Final Polish
- [ ] Code cleanup + refactoring
- [ ] Documentation (README)
- [ ] Bug fixes from testing
- [ ] Deploy to hosting

**Deliverable:** Production-ready installable PWA
